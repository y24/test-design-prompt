# test_viewpoint_identify_guide.md - テスト観点抽出ガイド（LLM向け）

このファイルは、LLM がアプリケーションのドキュメント類（利用手順書 / 仕様書 / 要件定義書など）からテスト観点を体系的に抽出するための「プロンプト用ガイド」である。  
ここで定義するルールとフォーマットに従って、テスト観点を Markdown 形式で出力すること。

---

## 1. ガイドの目的

- ドキュメントからテスト観点を抜き出す作業を、LLM を使って **標準化** すること。
- QA チーム内で観点の粒度・切り口・命名がバラバラにならないようにすること。
- 後続のテストケースレビュー（`test_review_guide.md`）で利用できるように、観点に **テスト分類** と **リスクスコア** を付与すること。

LLM は、以降の指示に従い、  
「仕様・業務フロー → テスト観点 → テストケース」  
のうち、「テスト観点」のレイヤーを設計する役割を担う。

---

## 2. 前提と役割

LLM は次の前提で振る舞う。

- 役割:
  - 経験豊富なテスト設計担当の QA エンジニア
  - 要件/仕様から観点を切り出すことに慣れているレビュアー
- 目的:
  - ドキュメントの内容から、テストすべき観点を漏れなく・重複少なく抽出する
  - 正常系 / 準正常系 / 異常系 および 非機能テスト をバランスよく含める
  - 観点ごとにリスクを可視化し、後続工程で「どこから優先してテストするか」を判断しやすくする

---

## 3. 入力情報の想定と可変パラメータ

プロンプトでは、ユーザーから次の情報が与えられる想定とする。  
`{{…}}` は可変パラメータの例示。

- システム情報
  - システム名 / プロジェクト名: `{{system_name}}`
  - 対象リリース・バージョン: `{{release_version}}`
  - テストレベル（画面テスト / シナリオテスト / E2E など）: `{{test_level}}`
- ドキュメント類
  - 利用手順書の本文: `{{user_guide_text}}`
  - 仕様書/要件定義書の本文: `{{spec_text}}`
  - その他補足資料（業務フロー図などがテキスト化されたもの）: `{{other_docs}}`
- ユーザーからの指示（任意）
  - 特に重視してほしい領域（例: 「決済まわりの異常系を厚めに」）: `{{focus_area}}`
  - 非機能で特に重要な観点（例: 「レスポンス性能」「セキュリティ」など）: `{{non_functional_priority}}`

LLM は、これらの情報を前提に、観点を抽出する。

---

## 4. 抽出プロセス（LLM が内部で行う思考ステップ）

LLM は、次のステップで観点を整理すること。  
※ これらのステップは「思考手順」であり、最終出力には含めない。

1. **システムと業務の理解**
   - ドキュメントから、主な業務フロー・画面・API・バッチなどの「テスト対象」を把握する。
   - 主要な業務シナリオ（例: 会員登録 → ログイン → 商品購入 → 退会）をざっくり列挙する。

2. **機能単位・業務単位への分割**
   - 「機能」または「業務ステップ」単位にグルーピングする。
     - 例: ログイン機能、ユーザー登録機能、商品検索機能、注文確定機能、など。

3. **テスト分類ごとの観点洗い出し**
   - 各機能/業務ごとに、以下の分類で観点を洗い出す。
     - 正常系: ドキュメントに記載された標準的な成功パターン
     - 準正常系: 想定内のエラーやバリエーション（未入力・境界値・制約違反など）
     - 異常系: 想定外のケースやシステムエラー・例外的な振る舞い
     - 非機能: パフォーマンス、セキュリティ、操作性、ログ出力など
   - 各観点は「何を確認するテストか」を 1 文〜数文で説明する。

4. **リスクの洗い出しとリスクスコア付与**
   - 各観点について、「その観点をテストしない場合にどんなリスクがあるか」を簡潔に記述する。
   - そのうえで、以下の基準でリスクスコア（1〜5）を付与する。

     - 5: 非常に高いリスク（ビジネスへの致命的影響や重大な障害につながる）
     - 4: 高いリスク（ユーザー体験の大きな損失や重要機能の不具合につながる）
     - 3: 中程度のリスク（限定的な影響だが、無視できないトラブルとなる可能性）
     - 2: 低いリスク（軽微な UX 低下や一部のユーザーのみ影響する程度）
     - 1: ごく低いリスク（問題はあるが、影響は限定的で優先度は低い）

   - 影響度と発生確率をざっくり踏まえた上で、総合的な印象でスコアを決めてよい。ただし理由はリスク説明に含める。

5. **重複・過不足の調整**
   - ほぼ同じ意味の観点が複数ないか確認し、統合できるものは統合する。
   - 明らかに重要そうな業務・機能なのに観点が不足していないか確認する。

---

## 5. 出力フォーマット（必ず守ること）

LLM は、テスト観点の抽出結果を **Markdown** で出力する。  
構造は以下のテンプレートに従う。

### 5.1 全体構造

```markdown
# テスト観点一覧（{{system_name}} / {{test_level}}）

## 1. 概要

- システム名: {{system_name}}
- テストレベル: {{test_level}}
- 対象ドキュメント:
  - 利用手順書: {{user_guide_title_or_summary}}
  - 仕様書/要件定義書: {{spec_title_or_summary}}
- 観点抽出の方針メモ:
  - 例: 「決済機能を重点的に」「非機能は性能とセキュリティを中心に」など

## 2. テスト観点一覧

### 2.1 機能/業務別サマリ

- 機能 A: 観点数 XX（正常系 X / 準正常系 Y / 異常系 Z / 非機能 W）
- 機能 B: 観点数 XX（…）

### 2.2 観点詳細

#### 機能/業務: {{feature_name_1}}

| 観点ID | 観点名 | テスト分類 | リスクスコア(1-5) | 観点の説明 | リスクの説明 |
|--------|--------|------------|-------------------|------------|--------------|
| {{id}} | {{name}} | {{classification}} | {{score}} | {{description}} | {{risk_detail}} |
| ...    | ...    | ...        | ...               | ...        | ...          |

#### 機能/業務: {{feature_name_2}}

| 観点ID | 観点名 | テスト分類 | リスクスコア(1-5) | 観点の説明 | リスクの説明 |
|--------|--------|------------|-------------------|------------|--------------|
| ...    | ...    | ...        | ...               | ...        | ...          |

## 3. 観点抽出上のメモ

- 不明点・仮定:
  - 例: 「エラーメッセージ内容は明記されていないため、一般的な UX を前提に観点を作成」
- 観点の抜けが懸念される領域:
- 今後ドキュメント整備が望ましい箇所:
````

### 5.2 各列の定義

* **観点ID**

  * 任意のユニークな ID。`機能略称-分類略称-連番` などの形式を推奨（例: `LGN-N-01`）。

* **観点名**

  * 観点の内容を一読してイメージできる短い名前（例: 「正常ログイン（メール+パスワード）」）。

* **テスト分類**

  * 以下のいずれかの値を使用すること。

    * `正常系`
    * `準正常系`
    * `異常系`
    * `非機能`

* **リスクスコア(1-5)**

  * 1〜5 の整数。値が大きいほどリスクが高い。

* **観点の説明**

  * 何を確認するテスト観点かを 1〜3 文程度で説明する。

* **リスクの説明**

  * この観点をテストしない場合に想定される問題を、ビジネス影響やユーザー影響の観点から説明する。

---

## 6. プロンプトテンプレート例

以下は、ユーザーが LLM に投げることを想定したプロンプト例である。
LLM は、このテンプレートに従って観点抽出を行うこと。

```text
あなたは経験豊富な QA エンジニアです。
これから、あるシステムの利用手順書や仕様書などの文章を渡すので、
そこからテストすべき「テスト観点」を抽出してください。

前提・目的は次のとおりです。

- システム名: {{system_name}}
- テストレベル: {{test_level}}（例: 画面単位の機能テスト、業務シナリオテスト など）
- 目的:
  - 後続のテストケース設計・レビューで利用するための観点一覧を作成する
  - 正常系 / 準正常系 / 異常系 / 非機能の観点をバランスよく網羅する
- 特に重視したい領域: {{focus_area}}
- 非機能で特に重要な観点: {{non_functional_priority}}

出力時は、次のルールに必ず従ってください。

1. ドキュメントの内容を踏まえて、機能・業務単位でテスト観点をグルーピングすること。
2. 各観点には「テスト分類（正常系 / 準正常系 / 異常系 / 非機能）」を必ず付与すること。
3. 各観点には「リスクスコア(1〜5)」と、その理由となる「リスクの説明」を記載すること。
4. 出力形式は、`test_viewpoint_identify_guide.md` で定義した Markdown フォーマットに従うこと。

それでは、以下のドキュメントを読んでテスト観点を抽出してください。

--- 利用手順書ここから ---
{{user_guide_text}}
--- 利用手順書ここまで ---

--- 仕様書/要件定義書ここから ---
{{spec_text}}
--- 仕様書/要件定義書ここまで ---

--- 補足資料ここから（任意） ---
{{other_docs}}
--- 補足資料ここまで ---
```

---

## 7. Few-shot 例（シンプルなサンプル）

### 7.1 ドキュメント例（抜粋）

```text
【機能概要】
本システムは、ユーザーがメールアドレスとパスワードでアカウントを作成し、
ログインしてマイページからプロフィール情報を編集できる Web アプリケーションである。

【ログイン機能】
- ユーザーは、登録済みのメールアドレスとパスワードを入力してログインする。
- メールアドレスまたはパスワードが誤っている場合、「メールアドレスまたはパスワードが違います」と表示する。
- パスワードを 5 回連続で誤入力した場合、アカウントを一時ロックし、15 分間ログインできない。

【非機能（セキュリティ）】
- パスワードは平文で保存してはならない。
- ログイン失敗回数など、セキュリティ関連の操作はログとして保存する。
```

### 7.2 観点抽出結果の例

```markdown
# テスト観点一覧（会員管理システム / 画面機能テスト）

## 1. 概要

- システム名: 会員管理システム
- テストレベル: 画面機能テスト（ログイン画面中心）
- 対象ドキュメント:
  - 利用手順書: ログイン〜マイページ利用手順
  - 仕様書/要件定義書: ログイン機能仕様書 v1.0
- 観点抽出の方針メモ:
  - ログイン機能の正常・異常系と、セキュリティ関連の非機能を重点的に抽出する。

## 2. テスト観点一覧

### 2.1 機能/業務別サマリ

- ログイン機能: 観点数 5（正常系 1 / 準正常系 2 / 異常系 1 / 非機能 1）

### 2.2 観点詳細

#### 機能/業務: ログイン機能

| 観点ID   | 観点名                                      | テスト分類 | リスクスコア(1-5) | 観点の説明                                                                                 | リスクの説明                                                                                 |
|----------|---------------------------------------------|------------|-------------------|--------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------|
| LGN-N-01 | 正常ログイン（メール+パスワード）          | 正常系     | 5                 | 登録済みのメールアドレスとパスワードを入力したときに、正常にマイページへ遷移できることを確認する。 | 正常ログインができないとユーザーがサービスを一切利用できず、ビジネス継続に致命的な影響が出る。 |
| LGN-S-01 | 未入力・形式不正なメールアドレスの扱い     | 準正常系   | 3                 | メールアドレスが未入力、または明らかに形式が不正な場合に、適切なエラーメッセージやバリデーションが行われることを確認する。 | 入力チェックが不十分だと、ユーザーの入力ミスに気づきにくくなり、問い合わせ増加や UX 低下につながる。 |
| LGN-S-02 | パスワード誤入力時のエラーメッセージ表示   | 準正常系   | 4                 | メールアドレスまたはパスワードが誤っている場合に、仕様通りのエラーメッセージが表示されることを確認する。 | 誤入力時のフィードバックが不適切だと、ログインできない原因が分かりにくくなり、ユーザー離脱を招く可能性がある。 |
| LGN-A-01 | 連続誤入力によるアカウントロック           | 異常系     | 5                 | パスワードを5回連続で誤入力した場合に、アカウントが一時ロックされ、15分間ログインできなくなることを確認する。 | アカウントロックが機能しないと、不正ログイン攻撃のリスクが高まり、セキュリティ事故につながる可能性がある。 |
| LGN-NF-01| ログイン失敗回数・操作ログの記録           | 非機能     | 4                 | ログイン失敗回数やセキュリティ関連操作が、仕様通りにログとして記録されることを確認する。     | ログが残らないと、不正アクセスの調査や障害解析が困難になり、インシデント対応が遅れるリスクがある。 |

## 3. 観点抽出上のメモ

- 不明点・仮定:
  - ログイン画面の UI 詳細（ボタン名など）は仕様に明記されていないため、一般的な Web ログイン画面を前提として観点を作成した。
- 観点の抜けが懸念される領域:
  - パスワードリセット機能の仕様が本ドキュメントに含まれていないため、その観点はここでは扱っていない。
- 今後ドキュメント整備が望ましい箇所:
  - エラーメッセージ文言の詳細、ログ出力フォーマットなどを別途仕様として明文化すると、より精度の高い観点設計が可能になる。
```

---

## 8. 運用上の注意

* LLM は、観点の「数を増やす」ことよりも、「テスト分類とリスクを意識した粒度で整理する」ことを優先する。
* ドキュメントが不完全な場合は、その旨をメモ欄に明記し、過度に推測しすぎないこと。
* チーム運用で使う際は、このガイドをベースにしつつ、プロジェクトごとのルール（観点ID命名規則など）を追加していくことが望ましい。
