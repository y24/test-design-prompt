# function_identify_guide.md

LLM による機能一覧抽出ガイド

## 1. このファイルの役割

このファイルは、LLM に対して「アプリケーションの機能一覧を抽出するためのプロンプトテンプレート」を提供するガイド。

* 元になるドキュメント：

  * 利用手順書
  * 仕様書
  * 要件定義書
    など（以降まとめて「入力ドキュメント」と呼ぶ）
* LLM はまず `rules.md` を読み、そのルールに従いつつ、このファイルに記載されたテンプレートでプロンプトを構成する。
* 抽出結果は **ツリー構造 + 重要度付き機能一覧** として整理し、
  `result/function_list.md` に出力する。

---

## 2. 使用イメージ（全体フロー）

1. オペレータが、入力ドキュメントのテキストを取得する。
2. 本ファイルの「プロンプトテンプレート」をベースに、`{{DOCUMENT_TEXT}}` などのプレースホルダに実際のドキュメントを埋め込む。
3. LLM にプロンプトを投げる。
4. LLM が `result/function_list.md` にそのまま保存可能な Markdown を出力する。

---

## 3. プロンプトテンプレート（本体）

以下のテンプレートを、LLM に投げるプロンプトのベースとして使用すること。

### 3.1 基本テンプレート（1 パス版）

````text
あなたは業務システムのテスト設計を支援するアシスタントです。  
これから渡すドキュメントを読み、アプリケーションの「機能一覧」を抽出し、  
rules.md のルールに従って `result/function_list.md` として保存可能な Markdown を出力してください。

# 前提

- あなたはすでに `rules.md` を読み込み、  
  「手順 1：機能一覧の抽出」の目的・ルール・重要度の考え方を理解しているものとします。
- 今回のタスクで行うのは **機能一覧の抽出のみ** です。  
  テストケース設計（入力値・期待結果・テスト観点の列挙など）は行わないでください。
- 入力ドキュメントにはノイズや重複が含まれている可能性があります。  
  その場合は、テストで意味のある単位に整理・統合してください。

# 入力ドキュメント

以下が対象システムのドキュメントです。  
業務フロー・画面・機能に関する記述を読み取り、機能一覧を構築してください。

<<<DOCUMENT_START>>>
{{DOCUMENT_TEXT}}
<<<DOCUMENT_END>>>

# タスク

1. ドキュメントから「ユーザー操作」や「システムの提供する処理」を読み取り、  
   テスト対象となる「機能候補」を洗い出してください。
2. 機能を、業務領域・画面・ユースケースなど、妥当な粒度でカテゴリ分けし、  
   ツリー構造で整理してください。
3. 各機能について、以下の情報を整理してください。
   - 機能名
   - 概要（1〜3 行程度）
   - 重要度（高 / 中 / 低 の 3 段階を基本とする）
4. 必要に応じて、機能ごとに **機能 ID** を付与しても構いません。  
   - 例：`F-001`, `F-002` …  
   - 後続のテストケース設計で参照しやすいように設計してください。
5. ドキュメントには明示されていないが、一般的な業務システムから自然に推測できる機能を補完する場合は、  
   その機能の概要に「※推測」と明記してください。

# 出力形式

出力は、`result/function_list.md` としてそのまま保存できる **Markdown 形式** で記述してください。

1. ファイル先頭に、対象システム名が分かる場合はタイトルを付けてください。
2. 「大カテゴリ → 中カテゴリ → 機能」というツリー構造で整理してください。
3. 各カテゴリごとに、機能を表形式で列挙してください。

出力の構造例は次のとおりです。

```markdown
# 機能一覧（○○システム）

## 1. 請求管理

### 1-1. 請求書一覧画面

| 機能ID | 機能名                     | 重要度 | 概要                                   |
|--------|----------------------------|--------|----------------------------------------|
| F-001  | 請求書一覧の表示           | 高     | 登録済みの請求書を一覧表示する。       |
| F-002  | 請求書一覧の検索・絞り込み | 高     | 顧客名、期間などの条件で検索できる。   |
| F-003  | 請求書詳細の表示          | 高     | 一覧から請求書を選択して詳細を表示する。|

### 1-2. 請求書編集画面

| 機能ID | 機能名                     | 重要度 | 概要                                   |
|--------|----------------------------|--------|----------------------------------------|
| F-010  | 請求書の新規登録           | 高     | 顧客・金額などを入力して新規登録する。 |
| F-011  | 請求書の更新               | 高     | 既存請求書の内容を編集・保存する。     |
| F-012  | 明細行の追加・削除         | 中     | 請求書に紐づく明細行を追加・削除する。 |

## 2. マスタ管理

### 2-1. 顧客マスタ

| 機能ID | 機能名           | 重要度 | 概要                           |
|--------|------------------|--------|--------------------------------|
| F-100  | 顧客の新規登録   | 高     | 顧客情報を新しく登録する。     |
| F-101  | 顧客情報の更新   | 高     | 顧客の名称や住所を更新する。   |
| F-102  | 顧客の無効化設定 | 中     | 利用しない顧客を無効化する。   |
````

4. システム名やカテゴリ名は、ドキュメント中に登場する正式名称を可能な限り利用してください。
5. 機能が特定の画面に属する場合は、カテゴリ名に「〜画面」を含めて分かりやすくしてください。
6. 出力には **テストケースの情報（手順・期待結果・テスト観点など）は含めないでください**。
   これらは後続の `functional_test_design_guide.md` で扱います。

# 注意事項

* ドキュメントに根拠のない機能を新たに発明しないでください。
  補完が必要な場合は「※推測」と明示したうえで、最小限に留めてください。
* 文書中の UI ラベルやボタン名などをそのまま機能名とするか、
  「ユーザーが何をしたいか」を表す動詞 + 名詞の形（例：「請求書を新規作成する」）に言い換えてください。
* 抽出した機能が 1 つのカテゴリに集中しすぎる場合は、
  画面や業務フローに応じて中カテゴリを分割し、読みやすい構造にしてください。
* 重要度の判断に迷った場合は、次の優先順位を参考にしてください。

  * 「高」：業務が成り立たなくなる / 法令・会計・セキュリティなどに関わる / 利用頻度が極めて高い
  * 「中」：業務上重要だが、代替手段がある / 利用頻度は中程度
  * 「低」：補助的な機能 / 利用頻度が低い / 無くても致命的ではない

以上のルールに従って、`result/function_list.md` を作成してください。

````

---

## 4. 機能抽出ルールの補足

プロンプトテンプレート内で省略している細かい判断基準を、ここに整理しておく。

### 4.1 「機能」の粒度

- 機能は「テストケース 1〜数件」で検証できる程度の単位を基本とする。
- 次のようなものは、原則として別の機能として扱う。
  - 新規登録 / 更新 / 削除
  - 検索 / 絞り込み / 並び替え
  - 一覧画面 / 詳細画面 / 編集画面
- ただし、説明がほぼ同一でテスト観点も共通である場合は、1 つの機能にまとめてよい。  
  例：「複数種類のマスタを同じ UI で登録する」など。

### 4.2 カテゴリの決め方

優先順位はこんな感じで考えると整理しやすい。

1. **業務プロセス単位**  
   例：見積 → 受注 → 請求 → 回収
2. **画面単位**  
   例：請求書一覧画面、請求書編集画面
3. **ユースケース単位**  
   例：請求書を作成して PDF を出力し、メール送信する

どれを採用するかは、入力ドキュメントの構成に合わせて柔軟に決める。

---

## 5. Few-shot 例

LLM に「こういう感じで出して」と教えるための、簡単なサンプル。

### 5.1 入力ドキュメント（例）

```text
3. ログイン

1. ログイン画面を開きます。
2. ユーザーIDとパスワードを入力します。
3. 「ログイン」ボタンをクリックすると、メインメニュー画面が表示されます。
4. パスワードを一定回数間違えるとアカウントがロックされます。

4. 顧客検索

1. メインメニューから「顧客検索」を選択します。
2. 顧客名または顧客コードを入力して検索できます。
3. 検索結果から顧客を選択すると、顧客詳細画面が表示されます。
4. 顧客詳細画面では、住所や連絡先などを確認できます。
````

### 5.2 期待される出力イメージ（抜粋）

```markdown
# 機能一覧（サンプルシステム）

## 1. 共通

### 1-1. ログイン

| 機能ID | 機能名                         | 重要度 | 概要                                                         |
|--------|--------------------------------|--------|--------------------------------------------------------------|
| F-001  | ログイン認証                   | 高     | ユーザーIDとパスワードを入力してシステムにログインする機能。|
| F-002  | アカウントロック               | 高     | パスワード誤入力が一定回数を超えた場合にアカウントをロックする機能。 |

## 2. 顧客管理

### 2-1. 顧客検索

| 機能ID | 機能名                     | 重要度 | 概要                                                         |
|--------|----------------------------|--------|--------------------------------------------------------------|
| F-010  | 顧客の検索                 | 高     | 顧客名または顧客コードを条件に、顧客を検索する機能。        |
| F-011  | 顧客詳細の表示             | 中     | 検索結果から選択した顧客の詳細情報を表示する機能。          |
```
