# 不具合傾向分析 rules.md

## 1. このファイルの目的

このファイルは、LLM がプロダクトで発生した不具合チケットの情報を入力として受け取り、

- 不具合の発生傾向  
- 品質特性モデル（ISO/IEC 25010）に基づく傾向  
- 今後予想される不具合事象  
- 強化すべきテスト種別

を、一定の手順と観点に従って分析するための運用手順を規定する。

LLM はまず本ファイルを読み、ここに記載された手順・出力形式に沿って不具合分析を行うこと。

---

## 2. 入力として想定する情報

### 2.1 不具合チケットの単票情報

分析対象の不具合チケットには、可能な限り以下の情報が含まれていることを前提とする。

- タイトル、概要
- State（解決状況）
- Severity（重要度）
- 前提条件
- 再現手順
- 実施結果
- 期待される結果
- 発生環境（OS / ブラウザ / バージョン / 接続形態 など）
- テストフェーズ（単体 / 結合 / システム / 受け入れ / リリース後 など）
- テスト種別（機能テスト / シナリオテスト / 回帰テスト / 性能テスト / etc）
- 検出方法（テストケース / 探索的テスト / 自動テスト / モニタリング / etc）
- ブロッカー（true/false）
- 原因分類（設計 / 実装 / テスト / 設定 / データ / 運用 / etc）
- 報告日
- 報告者
- 完了日
- 完了理由

加えて、可能であれば以下のような情報も含まれていることが望ましい。

- モジュール名 / 機能名 / 画面 ID などの位置づけ情報
- 対象プロダクト / サービス名
- バージョン、リリース番号

### 2.2 データ形式の前提

- 不具合チケットは、一覧（例: JSON 配列 / CSV / テーブル形式）で与えられることを想定する。
- 各チケットのフィールド名と意味が不明瞭な場合、LLM は推測で補完せず、必ずユーザーに質問して意味を確認すること。

---

## 3. 不明点がある場合の扱い

分析にあたり、不明な用語や理解できない記述について情報が必要な場合は、決して推測で補完せず、ユーザーに対して質問する。

質問が必要になる典型例:

- プロダクト固有のモジュール名 / 略語 / ラベルの意味が不明なとき
- テスト種別やテストフェーズが空欄 / 不整合だが分析に大きく影響する場合
- 分析対象期間（どこからどこまでのチケットか）が明確でない場合
- 同じフィールド名で、チケットによって意味が異なっていそうな場合

質問を行う際は、以下を明確にすること。

- どのフィールド（例: `TestType` / `Module`）について
- どのような選択肢・解釈があり得るのか
- どの分析ステップ・結果に影響しそうか

ユーザーからの回答を反映させたうえで、改めて分析を続行する。

---

## 4. 全体の分析フロー

LLM は、以下のステップに従って分析を行う。

### Step 0: 前提条件・分析範囲の整理

1. 入力された不具合チケット一覧から、以下を整理して明示する。
    - 分析対象期間（最初の報告日〜最後の報告日）
    - 対象プロダクト / バージョン / リリースなど、範囲を特定できる情報
    - テストフェーズの内訳（例: 結合テスト中の不具合が 70% など）
2. 欠損データや異常値が顕著な項目があれば列挙し、分析結果にどう影響しそうかを簡潔にコメントする。

### Step 1: 不具合チケットのグルーピングと分布把握

1. 以下のような軸でチケットをグルーピングし、件数や割合を把握する。
    - モジュール別 / 機能別 / 画面別
    - テストフェーズ別
    - テスト種別別
    - 検出方法別（テストケース / 探索的 / 自動テスト / 監視 / etc）
    - 原因分類別（設計 / 実装 / テスト / etc）
    - Severity 別
    - ブロッカー（true/false）
2. 可能であれば、複数軸の組み合わせ（例: モジュール × Severity、テストフェーズ × 原因分類）の傾向も文章で整理する。
3. 特に値が偏っている組み合わせ（例: 特定モジュールで高 Severity が多いなど）は「要注意パターン」としてメモしておく。

### Step 2: 不具合事象パターンの抽出

1. タイトル・概要・再現手順・実施結果などのテキストから、事象の共通パターンを抽出する。
    - 例: 「計算結果の不整合」「画面表示崩れ」「権限チェック漏れ」「タイムアウト」「バリデーション不足」など
2. 類似した事象をグループ化し、それぞれのグループごとに
    - 代表的な事象の説明
    - 該当チケット件数
    - 主なモジュール / 機能 / 画面
    - 主なテストフェーズ / テスト種別 / 原因分類
   を整理する。
3. 事象パターンごとに、どのような業務シナリオやユーザー行動と結び付いているかを推測し、可能な範囲で文章化する。

### Step 3: ISO/IEC 25010 品質特性へのマッピング

1. 各不具合事象を、ISO/IEC 25010 の品質特性にマッピングする。
    - 機能適合性
    - 性能効率性
    - 互換性
    - 使用性
    - 信頼性
    - セキュリティ
    - 保守性
    - 移植性
2. マッピングは「主に影響する特性」を 1〜数個選び、以下のように集計する。
    - 品質特性ごとの不具合件数・割合
    - 該当する主なモジュール / 機能
    - 主なテストフェーズ / テスト種別
3. 特定の品質特性に偏りがある場合（例: 使用性関連の不具合が多い）には、その背景を推測し、どのようなテストやレビューが不足していそうかを記述する。

### Step 4: 不具合の発生傾向の整理

1. Step 1〜3 の結果を踏まえて、「不具合の発生傾向」を以下の観点でまとめる。
    - 機能・業務別に見たときの傾向
    - モジュール別・画面別の傾向
    - テストフェーズ / テスト種別ごとの傾向
    - 原因分類ごとの傾向
    - 品質特性モデルの観点から見た偏り
2. 特にリスクが高いと判断される領域については、以下を具体的に書く。
    - どのような事象がどのくらいの頻度で発生しているか
    - ユーザーやビジネスにどの程度の影響を与えうるか
    - 現在のテストやレビューのどこが弱点になっていそうか

### Step 5: 今後予想される不具合事象の想定

1. これまで抽出した事象パターン・品質特性の偏り・テストフェーズ / テスト種別の分布をもとに、「今後起こりそうな類似不具合」を推測する。
2. 類推にあたっては、以下の観点を用いる。
    - 同じモジュール・画面で、まだテストされていない（またはテストケースが少ない）操作・入力パターン
    - 既に発生している事象の境界条件違い・データパターン違い
    - 他の品質特性にも波及しそうな影響（例: 機能適合性の不具合が信頼性にも波及）
3. 今後予想される不具合事象を、できるだけ「業務シナリオ」や「テストケースの粒度」に落とし込んだ形で記述する。

### Step 6: 強化すべきテスト種別の特定

1. 不具合の発生傾向と今後予想される不具合事象を踏まえて、強化すべきテスト種別を特定する。
2. テスト種別の例:
    - 機能テスト（画面単位・API 単位）
    - 業務シナリオテスト / E2E テスト
    - 回帰テスト
    - 性能テスト / 負荷テスト
    - セキュリティテスト
    - 互換性テスト（ブラウザ / OS / デバイス）
    - 設定・データ移行テスト
    - 探索的テスト
    - 自動テスト（ユニット / API / UI）
3. 各テスト種別について、以下をできる限り具体的に説明する。
    - なぜそのテスト種別を強化すべきと判断したのか（どのデータに基づくか）
    - どのモジュール / 機能 / 画面を優先対象とすべきか
    - どの品質特性（ISO/IEC 25010）のリスク低減につながるのか
    - どのようなテスト技法やアプローチが有効と考えられるか（境界値分析、状態遷移、業務フローの網羅 etc）

### Step 7: まとめとアクション案

1. 分析結果の要約として、特に重要なポイントだけを 3〜5 個程度に絞って列挙する。
2. 短期的（今期のテストで実施すべきこと）・中期的（次期リリースまでに検討すべきこと）のアクション案を提示する。
3. 可能であれば、以下のような観点も含める。
    - テスト観点のテンプレート化 / チェックリスト化
    - 不具合票の書き方や原因分類の見直し
    - レビュー・テスト設計プロセスの改善案

---

## 5. 出力形式（Markdown 構成）

LLM は、最終的な出力を Markdown 形式で構成する。基本的な構成例は以下とするが、不要な章は省略してよい。

```markdown
# 不具合傾向分析レポート

## 1. 分析対象と前提条件
- 分析対象期間:
- 対象プロダクト / バージョン:
- チケット総数:
- データ上の主な制約・注意点:

## 2. 不具合の発生傾向
### 2-1. 機能・業務別の傾向
- 概要:
- 要注意機能・業務:

### 2-2. モジュール / 画面別の傾向
- 概要:
- 要注意モジュール / 画面:

### 2-3. テストフェーズ / テスト種別ごとの傾向
- 概要:
- 特徴的なパターン:

### 2-4. 原因分類 / Severity / ブロッカーの傾向
- 概要:
- リスクの高い組み合わせ:

## 3. 品質特性モデル（ISO/IEC 25010）に基づく傾向
### 3-1. 機能適合性
- 傾向:
- 代表的な不具合例:
- 主な影響範囲:

### 3-2. 性能効率性
### 3-3. 互換性
### 3-4. 使用性
### 3-5. 信頼性
### 3-6. セキュリティ
### 3-7. 保守性
### 3-8. 移植性

（各特性について、該当が薄い場合は「特に顕著な傾向は見られない」と明記する。）

## 4. 今後予想される不具合事象
- 予想される事象パターン 1:
  - 想定シナリオ:
  - 背景となる既存の不具合傾向:
  - 影響しうる品質特性:
- 予想される事象パターン 2:
  - ...

## 5. 強化すべきテスト種別
- テスト種別 A:
  - 強化が必要な理由:
  - 優先対象のモジュール / 機能:
  - 主に低減できる品質リスク:
  - 推奨されるテストアプローチ:

- テスト種別 B:
  - ...

## 6. まとめと推奨アクション
- 重要ポイント（最大 5 個程度）:
- 短期的に着手すべきこと:
- 中期的に検討すべきこと:
