# 非機能品質基準策定ルール（rules.md）

## 1. 文書の目的

本書は、要件定義書・利用手順書・仕様書などのドキュメントを入力として、  
ISO/IEC 25010 の非機能品質特性（機能適合性を除く 7 特性）に関する品質基準（クライテリア）と目標値（確認方法）を体系的に策定するための、LLM向け運用手順を定める。

本書では「何を出力するか」「どのような流れで判断するか」といった**全体ルールと出力形式**のみを規定し、  
詳細な判断基準・具体的な作業手順は、別途定義するガイドライン（各種 `*_guide.md`）に委ねる。

---

## 2. 本ガイドで扱う品質モデル

本ガイドで扱う品質特性は、ISO/IEC 25010 における以下の 7 特性とする。

- 性能効率性（Performance efficiency）
- 互換性（Compatibility）
- 使用性（Usability）
- 信頼性（Reliability）
- セキュリティ（Security）
- 保守性（Maintainability）
- 移植性（Portability）

**機能適合性（Functional suitability）は対象外**とし、本ガイドでは検討しない。

1つの機能や処理に対して、複数の品質特性が同時に関わることを前提とする。  
例：大量データのインポート機能  
- 性能効率性：インポート処理時間、ピーク負荷時の応答
- 互換性：旧バージョンとのデータ互換性
- セキュリティ：インポートデータの改ざん検出、権限制御 など

---

## 3. インプット

LLMは、以下の情報を入力として扱う。

- 要件定義書（ビジネス要件・非機能要件・制約事項 等）
- 利用手順書 / 操作マニュアル
- システム仕様書（機能仕様・非機能仕様）
- 運用設計書・監視設計書・バックアップ方針 等（存在する場合）
- プロジェクトの前提条件・制約（利用者数、想定負荷、システム構成 等）
- 本書（rules.md）および、以下のガイドラインファイル群
  - `quality_model_overview_guide.md`
  - `nfr_extraction_guide.md`
  - `quality_criteria_design_guide.md`
  - `characteristic_specific_guide.md`
  - `evidence_and_gap_analysis_guide.md`
  - `action_planning_guide.md`

---

## 4. アウトプット

LLMが最終的に出力する情報は、以下の 4 つである。

1. **品質基準と目標値**
   - 対象とする 7 つの品質特性それぞれについて、満たすべき品質基準（クライテリア）と、それをどのように確認するか（目標値・評価方法）を定義する。
   - 1つの品質特性に対して、複数の品質基準を定義してよい。
   - 1つの品質基準が、複数の品質特性にまたがってもよい（主となる特性＋関連特性の形で明示する）。
   - なるべく具体的かつ測定・観察可能な形で記述する。
     - ただし、厳密な数値の決定は多くの場合難しいため、
       - 「どのような観点で確認するか」という**見出しと概要説明**を主とし、
       - 数値や閾値はあくまで**参考例**として位置づける。

2. **判断理由**
   - 各品質基準ごとに、そのように判断した根拠を記述する。
   - 可能な限り、
     - どのドキュメントの
     - どの章・見出し・図・表
     を根拠としたかを明示する。

3. **問題点の指摘**
   - ドキュメントの記載が不足・曖昧であり、クライテリアを妥当な精度で定められない場合は、**決して推測で補完せず**、不足・曖昧さを「問題点」として指摘する。

4. **次のアクション**
   - 不足情報やリスクが判明した場合に、プロジェクトとして検討・実施すべき具体的なアクションを提案する。
   - 例：要件定義の追記、性能試験の追加設計、監視・運用設計の再検討、セキュリティレビューの実施 など。

---

## 5. 作業プロセス概要

LLMは、以下のステップに従って検討を行う。  
各ステップの詳細手順は、対応するガイドラインファイルを参照すること。

### ステップ 1. 非機能に関する情報・候補の抽出

- 参照ガイド：`nfr_extraction_guide.md`
- 要件定義書・仕様書・運用設計等から、非機能に関係する記述や暗黙の前提を抽出し、「非機能候補」として整理する。
- 性能・運用・信頼性・セキュリティ・保守性などを示唆するキーワードや文脈を漏らさないように抽出する。

### ステップ 2. 品質特性へのマッピング

- 参照ガイド：`quality_model_overview_guide.md`
- 抽出した非機能候補を、ISO/IEC 25010 の 7 つの品質特性にマッピングする。
- 1つの項目が複数の品質特性に関連する場合は、それを明示する（主となる特性と関連特性を分けて整理してもよい）。

### ステップ 3. 品質基準と目標値の設計（たたき台）

- 参照ガイド：`quality_criteria_design_guide.md`
- 各品質特性ごとに、関連する非機能候補をもとにクライテリア案を作成する。
- この段階では、プロジェクトで後から調整・交渉できるような「たたき台」として、
  - 見出し（criterion_title）
  - 概要説明（criterion_description）
  - 確認方法の方針（verification_method）
  - 測定・評価指標の候補（measurement_indicator）
  - 目標レベルの例（target_level_example）
  を埋める。

### ステップ 4. 品質特性別の詳細検討

- 参照ガイド：`characteristic_specific_guide.md`
- 各特性ごとの代表的な観点や、よくある落とし穴を踏まえながら、クライテリア案をブラッシュアップする。
- 特性ごとに、「不足している観点」「過剰に厳しすぎる/甘すぎる観点」がないかを確認する。

### ステップ 5. 判断理由の整理

- 参照ガイド：`evidence_and_gap_analysis_guide.md`
- 各品質基準ごとに、以下を明示する。
  - どのドキュメントのどの記載を根拠にしたか
  - どのような利用シナリオ・リスクを想定したか
  - なぜその品質特性に紐づけたか
- ドキュメント上の明示的な記載だけでなく、前提条件・制約・システム構成なども根拠として整理する。

### ステップ 6. 問題点と次のアクションの整理

- 参照ガイド：`action_planning_guide.md`
- 情報不足や曖昧さがある場合、それを「問題点」として列挙する。
- 各問題点に対して、プロジェクトとして行うべき「次のアクション」を提案する。
  - 例：要件定義の追記、ステークホルダーへの質問事項、追加検討が必要な観点 など。

---

## 6. 出力フォーマット

### 6.1 全体構成

LLMが出力するドキュメントは、原則として以下の章立て構成とする。

1. 概要
2. 品質基準一覧（品質特性別）
3. 判断理由（品質基準別）
4. 問題点の指摘
5. 次のアクション

必要に応じて、プロジェクト側で章タイトルの変更・追加を行ってよい。

---

### 6.2 品質基準一覧のフォーマット

品質基準は、Markdown テーブル形式でまとめることを基本とする。  
列構成の例は以下の通り。

```markdown
#### 性能効率性 に関する品質基準

| criterion_id | quality_characteristic | related_quality_characteristics | criterion_title                           | criterion_description                                                                 | verification_method                                      | measurement_indicator                              | target_level_example                                                                 | related_documents        |
|-------------|------------------------|---------------------------------|-------------------------------------------|----------------------------------------------------------------------------------------|---------------------------------------------------------|----------------------------------------------------|--------------------------------------------------------------------------------------|--------------------------|
| PE-001      | 性能効率性             | 互換性                          | 大量データインポート時の処理時間         | 大量データインポート処理が、業務時間帯でもユーザー体感上ストレスなく完了すること。       | 性能試験（代表シナリオの負荷試験）、ログ分析             | インポート完了までの時間、同時実行時の平均応答時間      | 平日日中帯に同時実行3件、100万件レコードのインポートで5分以内（例・要調整）        | 要件定義書 3.2.1, 仕様書 5.4 |
````

* `quality_characteristic`

  * 主となる品質特性を 1つ指定する。
* `related_quality_characteristics`

  * 必要に応じて、関連する他の品質特性を列挙する（例：`互換性, セキュリティ`）。
* `target_level_example`

  * プロジェクトで実際に採用する値ではなく、**検討のたたき台となる例示**として記載する。

テーブルが大きくなりすぎる場合は、品質特性ごとにテーブルを分けてもよい。

---

### 6.3 判断理由のフォーマット

判断理由は、品質基準ごとに記述する。見やすさのため、以下のような形式を推奨する。

```markdown
#### PE-001 大量データインポート時の処理時間

- 主な根拠ドキュメント
  - 要件定義書 3.2.1 「インポート機能の概要」
  - 仕様書 5.4 「インポート処理フロー」
- 想定シナリオ
  - 月次締め処理時に大量データの一括インポートを行う運用を想定。
- 判断のポイント
  - 月次締めの時間制約が厳しいため、業務時間帯でも実行可能な処理時間が求められる。
  - 利用者数・データ量に関する明示的な非機能要件が不足しているため、ここでは業務担当者との協議を前提とした目標値例を提示している。
```

---

### 6.4 問題点の指摘

問題点の指摘は、一覧形式でまとめる。

```markdown
### 問題点の指摘

1. インポート処理に関する想定データ量・ピーク時間帯が、要件定義書上に明記されていない。
2. 同時接続ユーザー数の上限が、システム構成図・要件定義書どちらにも記載されていない。
3. 障害発生時の復旧目標時間（RTO）、データ損失許容度（RPO）が未定義である。
```

---

### 6.5 次のアクション

「問題点の指摘」に対応する形で、プロジェクトとしての次のアクションを整理する。

```markdown
### 次のアクション

1. インポート処理の想定データ量・利用時間帯について、業務担当者と協議し、非機能要件として要件定義書に追記する。
2. 想定する同時接続ユーザー数・ピーク負荷条件を、インフラ担当者・業務担当者を交えた打ち合わせで合意し、仕様書に反映する。
3. 障害時の運用ポリシー（RTO/RPO）を、運用チームと調整の上で定義し、運用設計書に反映する。
```

---

## 7. 設計上の原則・禁止事項

LLMは、本書および各種ガイドラインに従う際、以下の原則を厳守する。

1. **推測による補完の禁止**

   * ドキュメントに記載のない数値目標や前提条件を、確定した事実として扱ってはならない。
   * 情報が不足している場合は、「問題点の指摘」として明示し、「次のアクション」で追加検討を提案する。

2. **数値目標の位置づけ**

   * `target_level_example` に記載する値は、あくまで「検討の出発点となる例」であり、「プロジェクトで確定した数値」として扱ってはならない。

3. **トレーサビリティの確保**

   * 可能な限り、各品質基準と判断理由を、具体的なドキュメントの章・図・表に紐づける。
   * 根拠となる記述が存在しない場合は、必ず「存在しない」ことを明示する。

4. **網羅性と現実性のバランス**

   * すべての品質特性で過剰に細かいクライテリアを列挙するのではなく、

     * システム特性・リスクレベル・開発/運用体制を踏まえた**現実的な粒度**での基準策定を心がける。

5. **プロジェクトごとの差異の尊重**

   * 本ガイドは汎用的なフレームワークであり、
     個々のプロジェクトの背景（業界、ユーザー数、提供形態 等）に応じて、
     クライテリアの内容・粒度・優先度が変わり得ることを前提とする。

---

## 8. LLMへの指示テンプレート（プロンプト例）

実際にLLMを実行する際は、ユーザー側のプロンプトで本ファイル（rules.md）および各ガイドを読み込ませたうえで、以下のような指示を与えることを想定する。

```text
あなたは、ソフトウェア品質の専門家です。
これから、あるアプリケーションの要件定義書・利用手順書・仕様書などのドキュメントを渡します。

同時に、以下のガイドラインファイルを渡します。
- rules.md（このファイル）
- quality_model_overview_guide.md
- nfr_extraction_guide.md
- quality_criteria_design_guide.md
- characteristic_specific_guide.md
- evidence_and_gap_analysis_guide.md
- action_planning_guide.md

まず最初に、rules.md を読み込み、このファイルに記載された目的・インプット・アウトプット・作業プロセス・出力フォーマット・禁止事項を理解してください。

その上で、rules.md および各ガイドラインに従い、
ISO/IEC 25010 の非機能品質特性（性能効率性・互換性・使用性・信頼性・セキュリティ・保守性・移植性）について、
以下の情報を出力してください。

1. 品質基準と目標値
2. 判断理由
3. 問題点の指摘
4. 次のアクション

推測で不足情報を埋めず、情報不足や曖昧さがある場合は「問題点の指摘」「次のアクション」として明示してください。
数値はあくまで例示とし、確認方針が伝わるような見出しと概要説明を主に記述してください。
