# 非機能品質モデル概要ガイド

## 1. このガイドの目的

本ガイドは、ISO/IEC 25010 における以下の 7 つの非機能品質特性  
（機能適合性を除く）を、LLM が一貫した基準で扱えるようにすることを目的とする。

- 性能効率性（Performance efficiency）
- 互換性（Compatibility）
- 使用性（Usability）
- 信頼性（Reliability）
- セキュリティ（Security）
- 保守性（Maintainability）
- 移植性（Portability）

主な役割は次の 2 点である。

1. 抽出された「非機能候補」（要件・仕様・手順書の記述）を  
   上記のどの品質特性に紐づけるかを判断するための観点を示すこと。
2. 各品質特性ごとに、どのような観点・キーワード・文脈が  
   関連しやすいかを例示し、マッピングのばらつきを減らすこと。

本ガイドでは、**定義の暗記**ではなく、  
「どのような現実の問題・リスクに対応する特性なのか」を重視して解説する。

---

## 2. 品質特性マッピングの基本方針

### 2.1 複数特性へのマッピングを許容する

1つの非機能候補は、複数の品質特性に関連してよい。

- 例：大量データのインポート機能に関する非機能候補
  - 性能効率性：処理時間、ピーク負荷時のパフォーマンス
  - 信頼性：異常時のリトライ、途中で落ちないこと
  - セキュリティ：インポートデータの改ざん検出、権限チェック

LLM は、**主となる品質特性（primary）**と、  
関連する品質特性（related）を分けて整理することが望ましい。

### 2.2 機能適合性との境界

本ガイドでは、**機能適合性（Functional suitability）は扱わない**。

- 「どのような業務機能があるか」「どの項目を入力できるか」  
  といった要件は、基本的には機能適合性に分類される。
- ただし、同じ記述の中に「処理時間」「エラー時の挙動」「アクセス権」  
  などが含まれる場合は、該当する非機能特性と併せて扱う。

### 2.3 マッピング手順（高レベル）

1. 非機能候補の文を読み、  
   「何を守りたい／コントロールしたい話なのか」を考える。
2. 以下の 7 特性の定義・典型観点と照らし合わせる。
3. 最も本質的に近い特性を **主特性** として選ぶ。
4. それ以外に、強く関連する特性があれば **関連特性** として追加する。

---

## 3. 7 特性の共通フォーマット

各品質特性について、以下の観点で整理する。

- 定義（平易な日本語による要約）
- よくあるサブ特性・観点
- 典型的なキーワード・記述例
- 関連しやすいが区別したい領域
- マッピングのための判断の目安
- 簡単なマッピング例（Few-Shot的なサンプル）

---

## 4. 性能効率性（Performance efficiency）

### 4.1 定義（要約）

限られた資源（CPU、メモリ、ストレージ、ネットワーク帯域など）の中で、  
システムがどれくらい効率よく、十分な応答速度や処理能力を提供できるかに関する特性。

### 4.2 よくある観点

- 応答時間・レスポンスタイム
- スループット（単位時間あたりの処理件数）
- 同時接続数・同時実行数
- バッチ処理・バックグラウンド処理の完了時間
- ピーク負荷時の挙動（性能劣化の許容範囲）
- リソース使用量（CPU 使用率、メモリ使用量 など）

### 4.3 典型的なキーワード・記述例

- 「3 秒以内に」「○分以内に完了」
- 「ピーク時でも」「同時接続○ユーザー」
- 「1時間あたり○件処理」
- 「業務時間中のレスポンス低下を防ぐ」
- 「夜間バッチで処理」「業務開始前までに完了」

### 4.4 関連しやすいが区別したい領域

- 信頼性との境界：
  - 「処理が途中で失敗しない」「途中で止まらない」は信頼性寄り。
  - 「処理は成功するが、時間がかかりすぎる」は性能効率性。
- 使用性との境界：
  - 「操作ステップ数が多くて時間がかかる」は使用性の問題も含むが、  
    システムの応答速度ではなく操作プロセス起因の場合は主に使用性。

### 4.5 マッピング例（Few-Shot）

**入力例（非機能候補の文）：**

> 月次締め処理のデータインポートは、業務開始前の 2 時間以内に完了すること。

**マッピング結果例：**

- 主特性：性能効率性
- 関連特性：信頼性（失敗した場合のリスクが暗黙に存在する）

---

## 5. 互換性（Compatibility）

### 5.1 定義（要約）

システムが他のシステムやコンポーネント、異なる環境と、  
問題なく共存・連携できるかに関する特性。

### 5.2 よくある観点

- 他バージョンとのデータ互換性（上位互換・下位互換）
- 他システムとのインタフェース連携（API 仕様、データ形式）
- ブラウザ・OS・デバイス間での挙動の一貫性
- 外部サービスやミドルウェアとの連携要件

### 5.3 典型的なキーワード・記述例

- 「既存システムと同じ CSV 形式」「旧バージョンのデータを取り込む」
- 「Internet Explorer / Chrome / Edge に対応」
- 「モバイル端末からも利用可能」
- 「他システムに連携するための API」

### 5.4 関連しやすいが区別したい領域

- 移植性との境界：
  - 「別 OS に移植しやすい」は移植性。
  - 「複数 OS 上で同じように動作する」は互換性寄り。
- 使用性との境界：
  - 「スマートフォン画面で見づらい」は使用性。
  - 「スマートフォンからアクセスできない」は互換性／移植性の可能性。

### 5.5 マッピング例（Few-Shot）

**入力例：**

> 旧バージョンでエクスポートした CSV ファイルを、本システムでインポートできること。

**マッピング結果例：**

- 主特性：互換性
- 関連特性：性能効率性（大量データの場合）、セキュリティ（インポートデータの検証）

---

## 6. 使用性（Usability）

### 6.1 定義（要約）

ユーザーがシステムを学び、理解し、操作し、目的を達成するまでの  
使いやすさ・分かりやすさ、一貫性、ユーザーの満足度に関する特性。

### 6.2 よくある観点

- 初見のユーザーにとっての習得容易性
- 操作手順の分かりやすさ・ステップ数
- 画面レイアウト・ラベル・メッセージの一貫性
- エラー時のメッセージの分かりやすさ
- アクセシビリティ（キーボード操作、色覚バリアフリー など）

### 6.3 典型的なキーワード・記述例

- 「直感的な UI」「分かりやすいエラーメッセージ」
- 「マニュアルなしでも操作できる」
- 「操作ステップ数を最小限に」
- 「フォントサイズ」「色のコントラスト」

### 6.4 関連しやすいが区別したい領域

- 性能効率性との境界：
  - 「画面表示が遅くてストレス」→性能効率性＋使用性。
- セキュリティとの境界：
  - 「パスワード入力が面倒」→使用性。
  - ただし、パスワードポリシー自体の強度はセキュリティ。

### 6.5 マッピング例（Few-Shot）

**入力例：**

> 取引登録画面では、1画面内で入力から確認まで完結できること。

**マッピング結果例：**

- 主特性：使用性
- 関連特性：性能効率性（画面遷移回数の削減による業務効率）

---

## 7. 信頼性（Reliability）

### 7.1 定義（要約）

システムが、想定された条件のもとで、  
一定期間にわたり中断や誤りなく処理を継続できるかに関する特性。

### 7.2 よくある観点

- 障害発生率・エラー率
- フェイルセーフ・フェイルソフトの仕組み
- 再試行・リトライ制御
- 障害発生時の自動復旧・部分的復旧
- データの一貫性（トランザクション管理 など）

### 7.3 典型的なキーワード・記述例

- 「途中で処理が止まらない」「ロールバック」
- 「リトライ制御」「再実行可能」
- 「データが不整合にならない」
- 「24時間無停止運用」

### 7.4 関連しやすいが区別したい領域

- 性能効率性との境界：
  - 「遅いが成功する」→性能効率性。
  - 「早いが時々失敗する」→信頼性の問題。
- セキュリティとの境界：
  - 攻撃による障害はセキュリティも関係するが、  
    「障害が起きたときにどう耐えるか」は信頼性。

### 7.5 マッピング例（Few-Shot）

**入力例：**

> バッチ処理中に障害が発生した場合でも、再実行により重複登録やデータ欠損が起きないこと。

**マッピング結果例：**

- 主特性：信頼性
- 関連特性：保守性（再実行手順の容易さ）

---

## 8. セキュリティ（Security）

### 8.1 定義（要約）

情報やサービスへのアクセスが、許可された主体に対してのみ適切に提供され、  
機密性・完全性・可用性などが守られていることに関する特性。

### 8.2 よくある観点

- 認証・認可（ログイン、権限管理）
- データの機密性（暗号化、マスキング）
- データの完全性（改ざん検知、チェックサム）
- 監査ログ・アクセスログの記録
- 脆弱性対策（入力値検証、CSRF/XSS 対策 など）

### 8.3 典型的なキーワード・記述例

- 「ログイン」「シングルサインオン」
- 「管理者権限」「ロールベースアクセス制御」
- 「暗号化」「ハッシュ化」
- 「監査ログ」「操作履歴」

### 8.4 関連しやすいが区別したい領域

- 信頼性との境界：
  - 攻撃によりシステムが停止するリスク → セキュリティ＋信頼性。
- 使用性との境界：
  - 「パスワードが複雑で覚えづらい」→使用性。
  - 「パスワードの複雑さを要求するポリシー」→セキュリティ。

### 8.5 マッピング例（Few-Shot）

**入力例：**

> インポート対象ファイルは、アップロード時にウイルスチェックおよびファイル形式検証を行うこと。

**マッピング結果例：**

- 主特性：セキュリティ
- 関連特性：互換性（形式検証）、信頼性（異常データによる障害防止）

---

## 9. 保守性（Maintainability）

### 9.1 定義（要約）

システムを変更・修正・改善する際の、変更のしやすさ、  
影響範囲の把握のしやすさ、テストのしやすさなどに関する特性。

### 9.2 よくある観点

- モジュール構造の分割・疎結合さ
- コードの可読性・命名規則
- 設定値の外出し（設定ファイル・環境変数）
- テスト容易性（単体テスト・自動テストのしやすさ）
- ログやメトリクスの粒度（原因調査のしやすさ）

### 9.3 典型的なキーワード・記述例

- 「設定値として切り出す」「環境ごとの設定」
- 「拡張しやすい」「再利用しやすい」
- 「テストコード」「自動テスト」
- 「ログレベル」「トレースログ」

### 9.4 関連しやすいが区別したい領域

- 使用性との境界：
  - 「ユーザーが設定を簡単に変更できる」は使用性寄り。
  - 「開発者が設定を簡単に変更できる」は保守性寄り。
- 移植性との境界：
  - 「環境依存部分を限定する」は移植性にも関係するが、  
    コード構造や設計の話であれば保守性も強く関係。

### 9.5 マッピング例（Few-Shot）

**入力例：**

> 接続先 URL やタイムアウト値は、全て設定ファイルで変更可能とすること。

**マッピング結果例：**

- 主特性：保守性
- 関連特性：移植性（環境ごとの切り替え容易性）

---

## 10. 移植性（Portability）

### 10.1 定義（要約）

システムを別のハードウェア環境、OS、クラウド環境などに  
移行しやすいかどうかに関する特性。

### 10.2 よくある観点

- OS / ミドルウェア依存の最小化
- コンテナ化（Docker 等）による環境の持ち運び
- インフラ構成のコード化（IaC）
- 複数クラウド / 複数環境への展開容易性

### 10.3 典型的なキーワード・記述例

- 「クラウド依存機能を最小限に」
- 「Windows / Linux 両対応」
- 「Docker コンテナとして提供」
- 「オンプレミス / クラウドの両方で稼働可能」

### 10.4 関連しやすいが区別したい領域

- 互換性との境界：
  - 「複数 OS 上で動作する」→互換性寄り。
  - 「将来別 OS に移行しやすい設計」→移植性。
- 保守性との境界：
  - 環境依存部分を明確に分離する設計は、保守性と移植性の両方に関係する。

### 10.5 マッピング例（Few-Shot）

**入力例：**

> 本システムは、将来的にクラウド環境への移行を想定し、  
> OS 依存のコンポーネントを最小限に抑えること。

**マッピング結果例：**

- 主特性：移植性
- 関連特性：保守性

---

## 11. マッピング実践ミニサンプル（総合 Few-Shot）

### 11.1 入力例（非機能候補のセット）

次のような要件・仕様の断片があるとする。

1. 「月次締め時に大量データをインポートする処理は、業務開始前の 2 時間以内に完了すること。」
2. 「旧バージョンでエクスポートした CSV ファイルを、本システムでインポートできること。」
3. 「取引登録画面では、1画面内で入力から確認まで完結できること。」
4. 「バッチ処理中に障害が発生した場合でも、再実行により重複登録やデータ欠損が起きないこと。」
5. 「システムへのアクセスは、社内ネットワークからのみに制限すること。」
6. 「接続先 URL やタイムアウト値は、すべて設定ファイルで変更可能とすること。」

### 11.2 マッピング結果例

| No | 非機能候補                                                                 | 主特性             | 関連特性                            |
|----|----------------------------------------------------------------------------|--------------------|-------------------------------------|
| 1  | 月次締め時に大量データをインポート…2時間以内に完了                        | 性能効率性         | 信頼性                              |
| 2  | 旧バージョンでエクスポートした CSV ファイルをインポートできる            | 互換性             | 性能効率性, セキュリティ           |
| 3  | 取引登録画面では 1画面内で入力から確認まで完結                            | 使用性             | 性能効率性                          |
| 4  | バッチ処理中に障害発生しても再実行で重複登録・欠損が起きない             | 信頼性             | 保守性                              |
| 5  | システムへのアクセスは社内ネットワークからのみに制限                      | セキュリティ       | 信頼性                              |
| 6  | 接続先 URL やタイムアウト値は設定ファイルで変更可能                       | 保守性             | 移植性                              |

---

## 12. LLM への指針（マッピング時のまとめ）

LLM が品質特性へのマッピングを行う際は、次の点を常に意識する。

1. **「何を守りたい話か？」を言語化する**
   - 時間？ 安全性？ データの一貫性？ 操作の分かりやすさ？ 保守のしやすさ？

2. **主特性と関連特性を分ける**
   - 1つに決めきれない場合は、「一番問題になりそうな側」を主特性とする。

3. **機能適合性との混在を認識する**
   - 1つの文に機能要件と非機能要件が混ざることは多い。
   - 非機能に関わる部分だけを抜き出してマッピングしてよい。

4. **無理に全特性を埋めない**
   - プロジェクトによっては、ほとんど考慮されていない特性（例：移植性）があってもよい。
   - 「記載がなく判断できない」場合は、そのまま後続の「問題点の指摘」で扱う。

以上の方針と例を参考に、`nfr_extraction_guide.md` で抽出された候補を、  
本ガイドに基づき 7 つの品質特性にマッピングすること。
