# 次のアクション整理ガイド

## 1. このガイドの目的

本ガイドは、以下の情報を入力として、

- 品質基準（クライテリア）の一覧  
- 判断理由（`evidence_and_gap_analysis_guide.md` の成果）  
- 問題点の指摘（ギャップ）

それらをもとに、

> 「このままでは決めきれない／リスクが残る点について、  
>  プロジェクトとしてどのような『次のアクション』を取るべきか」

を整理するためのルールを定める。

ゴールは次の通り。

- 各問題点に対して、「誰が」「何を」「どのレベルまで」やればよいかを言語化する。
- アクションの粒度を揃え、**会話のきっかけになる ToDo リスト**を作る。
- 不足情報を「かっこよく推測する」のではなく、**「ちゃんと聞きに行く／決めに行く」ための材料**にする。

---

## 2. 前提・インプット

LLM は、「次のアクション」を整理する際、少なくとも次を参照する。

- `rules.md`
  - 「次のアクション」をどのように出力するかの全体ルール
- `evidence_and_gap_analysis_guide.md`
  - 各クライテリアの判断理由と、問題点の指摘一覧
- `quality_criteria_design_guide.md`
  - 各クライテリアの内容（何を守ろうとしているか）
- 対象システムのドキュメント一式
  - 要件定義書、仕様書、運用設計書、構成図 等

---

## 3. 「次のアクション」とは何か

### 3.1 定義

「次のアクション」とは、

> 特定の問題点・不確実性・リスクを解消・軽減するために、  
> プロジェクトメンバーが今後取るべき具体的な活動

を指す。

### 3.2 主な種類

次のようなカテゴリに分けて考えると整理しやすい。

- **情報確認・ヒアリング**
  - 業務担当者・プロダクトオーナーへの質問
  - インフラ担当者への確認
  - セキュリティチームへの相談 など

- **追加定義・ドキュメント更新**
  - 要件定義書への追記・修正
  - 仕様書・運用設計書・構成図の更新
  - 非機能要件セクションの新設・整理

- **設計・構成の検討・見直し**
  - 性能・可用性・セキュリティを満たすための設計オプションの比較
  - 冗長構成や監視設計の見直し

- **検証・テスト計画の立案**
  - 性能試験・負荷試験のシナリオ検討
  - 障害復旧試験・フェイルオーバー試験の計画
  - ペネトレーションテストやユーザビリティ評価の実施検討

- **運用・監視・ルール整備**
  - 運用手順書の作成・更新
  - 監視項目・アラート閾値の定義
  - ログ保管ポリシーやアクセス権限ルールの整備

---

## 4. アクション整理のプロセス

LLM は、「問題点の指摘」から「次のアクション」を導く際、  
概ね次のステップを辿る。

1. 問題点の一覧を再確認する
2. 問題点ごとに「何が分かれば / 何が変われば 解消するか」を考える
3. それを行うために **「誰」が関わるべきか** を仮置きする
4. 具体的なアクション文に落とす
5. 重要度・緊急度などに応じて優先順位を付ける（可能な範囲で）

---

## 5. アクションの情報項目（フォーマット）

1件のアクションについて、次のような項目を持つことを推奨する。

| 項目名                 | 説明 |
|------------------------|------|
| `action_id`            | アクションを一意に識別する ID（例：ACT-001）。 |
| `related_issue_ids`    | 対応する問題点の ID や概要（あれば）。 |
| `related_criteria_ids` | 関連するクライテリア ID（例：PE-001, SEC-002）。 |
| `summary`              | アクションの概要（短い一文）。 |
| `details`              | 何を・どのように・どの範囲まで行うかの詳細。 |
| `suggested_owner`      | 主に誰が動くべきかの候補（例：業務担当、QA、開発リーダー、インフラ担当）。 |
| `category`             | アクションの種類（情報確認 / 追加定義 / 設計見直し / テスト計画 / 運用整備 など）。 |
| `priority`（任意）     | 優先度（High / Medium / Low など）。 |
| `notes`（任意）        | 補足・前提条件など。 |

---

## 6. アクションの書き方の例

### 6.1 情報確認・ヒアリング系

- 例：
  - 「月次インポートの想定データ量（件数・ファイルサイズ）と、ピーク時の同時実行数について、業務担当者とインフラ担当者を交えてヒアリングし、要件定義書に明記する。」

### 6.2 追加定義・ドキュメント更新系

- 例：
  - 「24時間 365日運用の前提のもと、計画停止時間帯の扱い（メンテナンスウィンドウ）を定義し、運用設計書に追記する。」

### 6.3 設計・構成見直し系

- 例：
  - 「月次インポート処理のピーク負荷に対応するために、バッチ処理の並列化・分割実行などの方式案を検討し、性能設計書に反映する。」

### 6.4 テスト計画・検証系

- 例：
  - 「想定データ量を用いた性能試験シナリオ（平常時・ピーク時）を作成し、テスト計画書に追加する。」

### 6.5 運用・監視・ルール整備系

- 例：
  - 「インポート処理の異常終了時に発報すべきアラート条件と通知先（運用チーム・開発チーム）を定義し、監視設計書に記載する。」

---

## 7. 出力フォーマット例（Markdown テーブル）

アクション一覧は、品質特性にまたがってもよいが、  
見やすさのために章やカテゴリごとにテーブルを分けてもよい。

```markdown
### 次のアクション一覧（例）

| action_id | summary                                                       | related_issue_ids | related_criteria_ids | category      | suggested_owner         | priority | details                                                                                             | notes                        |
|----------|----------------------------------------------------------------|-------------------|----------------------|---------------|-------------------------|----------|-----------------------------------------------------------------------------------------------------|------------------------------|
| ACT-001  | 月次インポートの想定データ量・同時実行数のヒアリング         | ISS-PE-001        | PE-001               | 情報確認      | 業務担当 / インフラ担当 | High     | 月次締め時に処理対象となるレコード件数・ファイルサイズ、および同時実行されるインポートジョブ数を確認し、要件定義書に追記する。 | ヒアリング結果は性能試験計画にも反映する。 |
| ACT-002  | 計画停止時間帯（メンテナンスウィンドウ）の定義と明文化     | ISS-REL-001       | REL-001              | 追加定義・運用 | PM / 運用担当           | Medium   | 24時間 365日運用の前提のもとで許容される計画停止時間帯を定義し、運用設計書に明記する。                         | SLA がある場合は整合性を確認する。         |
| ACT-003  | 代表シナリオに基づく性能試験シナリオの策定                   | ISS-PE-001        | PE-001               | テスト計画    | QA / 開発               | High     | 想定データ量・ピーク条件を反映した性能試験シナリオ（平常時・ピーク時）を作成し、テスト計画書に追加する。       | 本番相当環境で実行可能かも併せて検討する。 |
````

---

## 8. Few-Shot：問題点 → アクションの具体例

### 8.1 問題点（例）

```markdown
### 問題点の指摘（性能効率性 関連）

1. 月次インポートの対象データ量・ピーク時の同時実行数が不明である。  
   - 関連クライテリア：PE-001
   - 詳細：
     - 具体的なレコード件数やファイルサイズ、同時に実行されるインポートジョブ数が定義されていない。
     - そのため、「60分以内」という目標時間の妥当性を評価しづらい。
```

### 8.2 対応するアクション例

```markdown
| action_id | summary                                               | related_issue_ids | related_criteria_ids | category  | suggested_owner         | priority | details                                                                                           |
|----------|--------------------------------------------------------|-------------------|----------------------|-----------|-------------------------|----------|---------------------------------------------------------------------------------------------------|
| ACT-001  | 月次インポートの想定データ量・同時実行数のヒアリング | ISS-PE-001        | PE-001               | 情報確認  | 業務担当 / インフラ担当 | High     | 月次締め処理でインポート対象となるデータ量（レコード件数・ファイルサイズ）と、同時実行ジョブ数を確認し、要件定義書に明記する。 |
```

---

## 9. 優先順位の付け方（任意）

プロジェクト状況に応じて、アクションに優先順位を付けることも有効。

### 9.1 例：シンプルな三段階

* High

  * 品質基準の策定やテスト計画が「そもそも成立しない」レベルの問題に対応するもの。
* Medium

  * 品質レベルの妥当性や運用のスムーズさに重要だが、致命的ではないもの。
* Low

  * あれば望ましい改善や最適化。

### 9.2 注意

* LLM が優先度を「決めつける」必要はない。
  あくまで暫定的な判断として提案し、人間が調整する前提でよい。
* 優先度の判断根拠は、`notes` や判断理由の中で簡単に触れておくとよい。

---

## 10. LLM が守るべき原則・禁止事項

1. **アクションは「実行可能な単位」で書く**

   * 「セキュリティを強化する」といった抽象的な表現だけではなく、

     * 「○○の観点を誰と検討し、どのドキュメントに反映するか」
       をイメージできるレベルまで分解する。

2. **LLM 自身が判断できないことを決めない**

   * 例：人員アサイン、予算、購入製品の選定などは、
     具体的な製品名や金額まで固定しない。
   * 代わりに、「評価・比較を行うこと」自体をアクションとして提案する。

3. **問題点が無いところに無理にアクションを作らない**

   * 文書上、十分に定義されており、リスクも小さい部分については、
     無理にアクションを追加する必要はない。

4. **人間にとっての「会話のきっかけ」になる粒度を意識する**

   * プロジェクトメンバーがレビュー会議でそのまま読み上げて議論できる内容・粒度を目指す。

---

以上のガイドに従い、LLM は「判断理由」と「問題点の指摘」をもとに、
プロジェクトチームが具体的に動き出すための「次のアクション」を整理すること。
